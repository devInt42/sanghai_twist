# sanghai_twist

KOSA, Douzone, Mini proj. 3(React), Team 4, <sup>팀장</sup> 강현구, <sup>팀원</sup> 류정수, 김상연, 전지현

# 1. 프로젝트 개요

## 1.1. 프로젝트 기간

- 기획 및 설계 22/12/06 ~ 22/12/08
- 제작 기간 22/12/08 ~ 22/12/15
- 발표일 22/12/16

## 1.2. 개발 스택

![image](https://user-images.githubusercontent.com/18836863/208041025-ab335759-0f2c-4679-9dc8-34f6c4dbf97b.png)

# 2. 앱 기획 & 설계
  
## 2.1. 앱 주요 기능 및 목적

온라인 옷 쇼핑몰의 상하의를 구매할 때 서로다른 상 하의 상품들을 한눈에 매치시켜 비교하는 기능 제공. 앱은 사용자 자신이 가지고 있는 옷들이 쇼핑몰의 상품과 잘 어울리는지, 쇼핑몰에서 파는 어떤 상의에 어떤 하의가 어울릴지를 한눈에 비교해보고 옷을 구입할 때 더 잘 어울리는 옷을 구매 할 수 있게 한다.
 
## 2.2. 앱 설계

- 상품 데이터

11번가 Open API를 활용하였다. Key를 클라이언트에 배포하는 것이 보안상 문제가 있으므로 key가 저장된 별도의 서버에 Rest API를 구축, 클라이언트를 대신해서 11번가 Open API로부터 데이터를 받아온다.

각 상품의 상의 하의 정보를 구할수가 없었다. 대신 상의에 속하는 카테고리, 하의에 속하는 카테고리를 11번가 홈페이지에서 수작업으로 구할 수 있었고 해당 정보를 자체 서버에서 제공하게끔 하였다.

그러나, **상품에 대한 카테고리정보는 구할 수 없고, 대신 카테고리에 대한 상품정보는 구할 수 있다**

따라서, 사용자가 카테고리를 검색, 조회하여 선택하고 나서 해당 카테고리의 상품들을 볼 수 있게 해야했다.

- 백앤드 서버

nodejs express 모듈을 사용한 Rest API를 구축. OpenAPI Key를 가지고 클라이언트 대신 11번가에게 상품 데이터를 요청 하고 받는 역할을 한다.
다양한 상품들이 있는 11번가 Open API에서 옷에 관련된 카테고리만을 정제하는 역할도 한다.

- 클라이언트앱

CRA를 기반으로한 리엑트앱으로 구성.

- 페이지 설계

  - 메인 페이지
  
  상의, 하의와 관련된 카테고리 목록을 보여줌. 

  - 리스트 페이지
  
  메인에서 선택한 카테고리에 속한 상품목록을 보여줌.
  
  - 상세 페이지
  
  리스트 페이지에서 선택한 상품의 상세 정보를 보여줌
  
  - 옷장 페이지
  
  상세 페이지에서 담기한 옷들을 저장하고 해당 옷들의 상하의 매치를 수행한다.

## 2.3. 역할분담

### 2.3.1. <sup>팀장</sup>강현구

- **백앤드 서버** 설계 및 구현

  Express.js로 리엑트 빌드 파일들을 Static으로 라우팅하고 각 페이지 들에 대한 URL 직접 접근이 가능하게 별도의 라우팅도 구축하였다. 또한 백앤드 서버에 별도의 REST API를 구축하여 각 리소스에 대한 요청을 받아 응답에 필요한 데이터를 11번가의 OPEN API에 요청 및 응답받고 가공하여 클라이언트 앱에서 사용하기 편한 고정 형식의 JSON으로 파싱하여 응답할 수 있게 하였다.

- **데이터 패치 훅** 설계 및 구현

  클라이언트 앱에서 백앤드 서버로부터 상품 상세, 카테고리 상세(상품 목록이 포함), 카테고리 리스트등의 **데이터를 패치받는 로직을 Redux/Toolkit에 구현하고 커스텀 훅으로 모듈화**. 각 컴포넌트에서 커스텀 훅을 호출하는 것으로 쉽게 데이터를 로드하고 로드 상태를 구독 할 수 있게 하였다.

- React-Router를 활용한 **클라이언트 앱의 페이지 라우팅** 설계 및 구현

- **클라이언트 앱 메인 페이지** 설계 및 구현.

- **클라이언트 앱 Header 및 Footer** 설계 및 구현

- **클라이언트 앱 리스트 페이지**의 **무한 스크롤** 기능 구현.

### 2.3.2. 류정수

- **클라이언트 앱 옷장 페이지** 설계 및 구현

LocalStorage에 저장된 하의와 상의 상품 데이터 또는 사용자의 컴퓨터 로컬에 저장된 사진 데이터를 로드하여 CropperJS 라이브러리로 적당한 크기로 크롭하여 비교할 수 있게 하였다.

### 2.3.3. 김상연

- 상세 페이지 설계 및 구현

### 2.3.4 전지현

- 리스트 페이지의 설계 및 구현


# 3. 앱 구현

## 3.1. Front-end

### 3.1.1. 메인 페이지

#### 3.1.1.1. 메인 베너

![main-banner](https://user-images.githubusercontent.com/18836863/208285371-b68b3938-93c5-403d-9de9-266df2188dcf.gif)

- 해당 카테고리 바로가기 제공

- 부트 스트랩과 CSS 에니메이션을 이용한 부드러운 회전 및 클릭 애니메이션 구현

- useRef훅과 scrollIntoView를 통한 자동 스크롤 구현.


#### 3.1.1.2. 카테고리 검색 트리 뷰

![main-tree](https://user-images.githubusercontent.com/18836863/208284188-235df967-ba06-4bb0-967d-dec4f86ea17c.gif)

![main-tree2](https://user-images.githubusercontent.com/18836863/208284437-d9541892-c562-4a4a-92a0-d0c1536e2dea.gif)

- 키워드를 통해 전체 카테고리를 검색할 수 있다.

- 트리뷰를 통한 검색도 가능하다.

- 컴포넌트에 대한 제귀적 호출로 검색과 트리를 구현.

- CSS를 이용한 Expand/ Shrink Animation 구현.

- 카테고리 클릭시 해당 카테고리의 상품 리스트 페이지로 이동.


#### 3.1.1.3. 카테고리 목록 그리드 뷰

![main-grid](https://user-images.githubusercontent.com/18836863/208284581-1c39ad85-b116-4113-a5a1-f4aa15161af0.gif)

- 카테고리 목록을 그리드 형식으로 한눈에 볼 수 있다.

- CSS 에니메이션에 자연스러운 딜레이 효과를 주기위해 하위 컴포넌트에게 서로다른 setTimeout() 값을 주어 순차적으로 class를 변화시켜 애니메이션 시작 시간을 조정하였다.



### 3.1.2. 리스트 페이지

![list-sort](https://user-images.githubusercontent.com/18836863/208285179-5c40b144-174c-41d3-9a16-b2cfdf6eebd8.gif)

![list-pagination](https://user-images.githubusercontent.com/18836863/208284937-b8bf9728-8581-4f20-9def-383287a9d1c9.gif)

- react-slick 라이브러리를 통해 배너에 변화하는 텍스트 값을 출력한다.

- 현재 위치하고 있는 카테고리 상품의 이름, 이미지, 가격 정보 등을 출력한다.

- 인기순, 낮은 가격순, 누적 판매순 등으로 조회할 수 있다.
 
- 버튼을 클릭하면 다음 페이지의 상품을 추가하여 페이지를 렌더링한다.

- 상품을 선택하면 Detail Page로 이동한다.

### 3.1.3. 상세 페이지

- 앞서 List Page에서 선택한 상품의 상세 정보를 띄워준다.

- 제품의 이미지, 평점, 가격정보를 제공하며 담기 버튼을 누르면  해당 상품 데이터는 별도의 메모리로 옷장에 저장된다.

- 상품 옵션을 선택하면 모달 창을 출력한다.

- 구매를 원하면 즉시 구매 링크로 이동한다.

- API에 statisfaction을 Rating에 공간만큼 변환해 fill-up 한다. 

### 3.1.4. 옷장 페이지

- 앞서 Detail Page에서 사용자가 임시저장 해둔 상의 이미지링크와 하의 이미지링크를 통해 이미지들을 불러온다.

- 파일에서 상의와 하의를 선택하여 사용자가 원하는 크기로 자를 수 있다.

- 출력된 상의와 하의로 상-하의 매칭 기능을 제공하여 사용자는 코디를 한눈에 볼 수 있다.

- 사용법 버튼을 클릭하면 링크를 통해 사용법을 볼 수 있다.


# 4. 프로젝트 실행하기

## 4.1. 11번가 API키 설정

1. 11번가 OpenAPI 홈에서 회원가입을 한다.
2. 가입과 동시에 API 키 발급
3. 프로젝트_루트/config/apiKey.json 경로로 파일을 하나 만들고
4. { "key":발급받은키 } 를 쓰고 저장한다.

## 4.2. 호스팅 서버 주소 설정

/react-front-app/src/server.json 파일을 { "host":호스팅_서버주소 }로 변경.

